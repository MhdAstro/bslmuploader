# ุณุฑูุณ ูพุฑุฏุงุฒุด ุชุตูุฑ ุจุงุณูุงู

ุงู ุณุฑูุณ ฺฉ API ุชุญุช ูุจ ุงุณุช ฺฉู ูุณุช ุงุฒ URLูุง ุชุตุงูุฑ ุฑุง ุฏุฑุงูุช ฺฉุฑุฏูุ ุขูโูุง ุฑุง ุงุฒ ุทุฑู ุณุฑูุณ ุจุงุฒุจู ุจุงุณูุงู ุจุฑุฑุณ ูโฺฉูุฏุ ุฏุฑ ุตูุฑุช ูุงุฒ ุชุตุงูุฑ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ SafeImage ุณุงูุณูุฑ ฺฉุฑุฏู ู ุฏุฑ ููุงุช ุขูโูุง ุฑุง ุฏุฑ ุณุฑูุฑูุง ุจุงุณูุงู ุขูพููุฏ ูโฺฉูุฏ.

## โจ ูุงุจูุชโูุง

-   **ูพุฑุฏุงุฒุด ุฏุณุชูโุง ู ุบุฑููุฒูุงู:** ูุงุจูุช ูพุฑุฏุงุฒุด ฺูุฏู ุชุตูุฑ ุจู ุตูุฑุช ููุฒูุงู ุจุฑุง ุงูุฒุงุด ุณุฑุนุช ู ฺฉุงุฑุง.
-   **ฺฉูพุงุฑฺฺฏ ุจุง ุณุฑูุณ ุจุงุฒุจู:** ุจุฑุฑุณ ุงููู ุชุตุงูุฑ ุจุฑุง ุชุดุฎุต ูุญุชูุง ูุงููุงุณุจ ุงุฒ ุทุฑู `revision.basalam.com`.
-   **ุณุงูุณูุฑ ููุดููุฏ ู ูุงุจู ุชูุธู:** ุณุงูุณูุฑ ุฎูุฏฺฉุงุฑ ุจุฎุดโูุง ุงุฒ ุชุตูุฑ (ูุงููุฏ ฺูุฑูุ ูู ู...) ุจุง ูพุงุฑุงูุชุฑูุง ูุงุจู ุชูุธู.
-   **ููุงูู ุฏุฑ ุจุฑุงุจุฑ ุฎุทุง:** ุงฺฏุฑ ุณุฑูุณ ุณุงูุณูุฑ ุงุฒ ุฏุณุชุฑุณ ุฎุงุฑุฌ ุดูุฏุ ุณุฑูุณ ุจู ฺฉุงุฑ ุฎูุฏ ุงุฏุงูู ุฏุงุฏู ู ุชุตูุฑ ุงุตู ุฑุง ุขูพููุฏ ูโฺฉูุฏ ุชุง ุนููุงุช ูุชููู ูุดูุฏ.
-   **ูพฺฉุฑุจูุฏ ุขุณุงู:** ุชูุงู ุชูฺฉูโูุง ู ูพุงุฑุงูุชุฑูุง ุญุณุงุณ ุงุฒ ุทุฑู ูุชุบุฑูุง ูุญุท (`.env`) ูุฏุฑุช ูโุดููุฏ.

---

## ๐ ุฑุงูโุงูุฏุงุฒ ู ุงุณุชูุงุฏู

### ูพุดโูุงุฒูุง

-   Python 3.8+

### ูุฑุงุญู ูุตุจ

ฑ. ุงุจุชุฏุง ูพุฑูฺู ุฑุง ุงุฒ ฺฏุชโูุงุจ ฺฉููู ฺฉูุฏ:
```bash
git clone <your-repository-url>
cd <project-directory>
```

ฒ. ฺฉ ูุญุท ูุฌุงุฒ ูพุงุชูู ุณุงุฎุชู ู ุขู ุฑุง ูุนุงู ฺฉูุฏ:
```bash
# ุณุงุฎุช ูุญุท ูุฌุงุฒ
python -m venv venv

# ูุนุงูโุณุงุฒ ุฏุฑ ูููฺฉุณ ุง macOS
source venv/bin/activate

# ูุนุงูโุณุงุฒ ุฏุฑ ููุฏูุฒ
venv\Scripts\activate
```

ณ. ูุงุจุณุชฺฏโูุง ูพุฑูฺู ุฑุง ูุตุจ ฺฉูุฏ:
```bash
pip install -r requirements.txt
```

### ูพฺฉุฑุจูุฏ

ฑ. ุงู ุณุฑูุณ ุจุฑุง ุงุฌุฑุง ุจู ฺูุฏ ุชูฺฉู ู ฺฉูุฏ API ูุงุฒ ุฏุงุฑุฏ ฺฉู ุจุงุฏ ุฏุฑ ูุงู ุจู ูุงู `.env` ุฐุฎุฑู ุดููุฏ. ฺฉ ฺฉูพ ุงุฒ ูุงู `.env.example` (ุฏุฑ ุตูุฑุช ูุฌูุฏ) ุจุง ูุงู `.env` ุจุณุงุฒุฏ.

ฒ. ูุงู `.env` ุฑุง ุจุง ููุงุฏุฑ ูุงูุน ุฎูุฏ ูุฑุงุด ฺฉูุฏ:
```env
# .env

# --- ุชูฺฉูโูุง ุจุงุณูุงู (ุงูุฒุงู) ---
BASALAM_UPLOAD_TOKEN="Bearer YOUR_UPLOAD_TOKEN_HERE"
REVISION_API_TOKEN="YOUR_REVISION_TOKEN_HERE"

# --- ูพุงุฑุงูุชุฑูุง ุณุฑูุณ ุณุงูุณูุฑ (ุงุฎุชุงุฑ) ---
# ุงู ููุงุฏุฑ ูพุดโูุฑุถ ูุณุชูุฏ ู ูโุชูุงูุฏ ุขูโูุง ุฑุง ุชุบุฑ ุฏูุฏ
SAFEIMAGE_SIGMA_BLUR=25
SAFEIMAGE_FEATHER=5
SAFEIMAGE_ONLY_CLOTHES=false
SAFEIMAGE_BLUR_FACE=true
# ... ุณุงุฑ ูพุงุฑุงูุชุฑูุง
```

### ุงุฌุฑุง ุณุฑูุฑ

ุจุฑุง ุงุฌุฑุง ุณุฑูุฑ ุฏุฑ ุญุงูุช ุชูุณุนู (Development) ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ. ููฺฏ `--reload` ุจุงุนุซ ูโุดูุฏ ุจุง ูุฑ ุชุบุฑ ุฏุฑ ฺฉุฏุ ุณุฑูุฑ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุฌุฏุฏุงู ุฑุงูโุงูุฏุงุฒ ุดูุฏ.

```bash
uvicorn main:app --reload
```

ุญุงูุง ุณุฑูุณ ุดูุง ุฑู ุขุฏุฑุณ `http://127.0.0.1:8000` ุฏุฑ ุญุงู ุงุฌุฑุงุณุช.

---

## ๐ ูุณุชูุฏุงุช API

ุงู ุณุฑูุณ ุงุฒ FastAPI ูุฏุฑุช ฺฏุฑูุชู ู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุณุชูุฏุงุช ุชุนุงูู API ุฑุง ุชููุฏ ูโฺฉูุฏ. ูพุณ ุงุฒ ุงุฌุฑุง ุณุฑูุฑุ ูโุชูุงูุฏ ุจู ุขุฏุฑุณโูุง ุฒุฑ ูุฑุงุฌุนู ฺฉูุฏ:

-   **Swagger UI:** [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
    * ฺฉ ุฑุงุจุท ฺฉุงุฑุจุฑ ุชุนุงูู ุจุฑุง ูุดุงูุฏู ู ุชุณุช ุชูุงู Endpointูุง.

-   **ReDoc:** [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)
    * ฺฉ ููุง ุชูุฒ ู ุฎูุงูุง ุงุฒ ูุณุชูุฏุงุช API.

### ููููู ุฏุฑุฎูุงุณุช

ุจุฑุง ูพุฑุฏุงุฒุด ุชุตุงูุฑุ ฺฉ ุฏุฑุฎูุงุณุช `POST` ุจู ุงูุฏูพููุช `/process-images` ุงุฑุณุงู ฺฉูุฏ.

**ุฏุฑุฎูุงุณุช (Request):**
```bash
curl -X 'POST' \
  '[http://127.0.0.1:8000/process-images](http://127.0.0.1:8000/process-images)' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "photo_links": [
    "[https://example.com/image1.jpg](https://example.com/image1.jpg)",
    "[https://example.com/image2.png](https://example.com/image2.png)"
  ]
}'
```

**ูพุงุณุฎ ูููู (Success Response):**
```json
{
  "processed_images": [
    {
      "id": "generated-id-1",
      "url": "[https://cdn.basalam.com/new-image1-url.jpg](https://cdn.basalam.com/new-image1-url.jpg)"
    },
    {
      "id": "generated-id-2",
      "url": "[https://cdn.basalam.com/new-image2-url.jpg](https://cdn.basalam.com/new-image2-url.jpg)"
    }
  ]
}
```

**ูพุงุณุฎ ุฏุฑ ุตูุฑุช ุฎุทุง ุจุฑุง ฺฉ ุชุตูุฑ:**
ุงฺฏุฑ ุฏุฑ ูพุฑุฏุงุฒุด ฺฉ ุชุตูุฑ ุฎุงุต (ูุซูุงู ุฏุงูููุฏ ุขู) ุฎุทุง ุฑุฎ ุฏูุฏุ ูุชุฌู ุจุฑุง ุขู ุชุตูุฑ ุดุงูู ฺฉ ุขุจุฌฺฉุช ุฎุทุง ุฎูุงูุฏ ุจูุฏ.
```json
{
  "processed_images": [
    {
      "id": "generated-id-1",
      "url": "[https://cdn.basalam.com/new-image1-url.jpg](https://cdn.basalam.com/new-image1-url.jpg)"
    },
    {
      "error": "FAILED_DOWNLOAD:[https://example.com/image2.png](https://example.com/image2.png)",
      "details": "Details about the download failure..."
    }
  ]
}
```